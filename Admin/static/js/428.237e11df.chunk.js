"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[428],{81325:function(e,t,n){var a=n(66585);t.Z={createTechnician:e=>a.Z.Post("technician/createTechnician",e),technicianList:e=>a.Z.Get("technician/getTechnician",e),technicianTask:e=>a.Z.Get("task/getTasks",e),createTechnicianTask:e=>a.Z.Post("task/createTask",e),DeleteTechinician:e=>{let t=`technician/delete/${e}`;return a.Z.Post(t)},DeletedTechnician:e=>a.Z.Get("technician/all/deletedTechnician",e),RestoreTechnician:e=>{const t=`technician/delete/technician/${e}`;return a.Z.Post(t)},TechnicianCount:e=>a.Z.Get("company/totalTechnician",e),StartTaskCount:e=>a.Z.Get("task/start/taskcount",e),OngoingTaskCount:e=>a.Z.Get("task/ongoing/taskcount",e),CompletedTaskCount:e=>a.Z.Get("task/completed/taskcount",e),RegisterTechnicican:e=>a.Z.Post("otherauth/technicianRegister",e),EditTechnician:e=>{const t=`technician/editTechnician/${e.id}`;return a.Z.Post(t,e)},GetReports:e=>a.Z.Get("task/completedTaskDetails/",e),deleteTask:e=>a.Z.Post("task/delete/task",e)}},3428:function(e,t,n){n.r(t);var a=n(47313),i=(n(31046),n(22834)),c=n(33497),s=n(86121),d=n(43690),l=n(57884),r=n(91287),o=n(96892),h=n(71820),u=n(67118),x=n(81325),m=n(70816),p=n.n(m),k=(n(35508),n(18695),n(41948)),Z=n(65213),f=n(46417);const T=e=>{let{editing:t,dataIndex:n,title:a,inputType:i,children:c,...r}=e;const o="number"===i?(0,f.jsx)(s.Z,{}):(0,f.jsx)(d.Z,{});return(0,f.jsx)("td",{...r,children:t?(0,f.jsx)(l.Z.Item,{name:n,style:{margin:0},rules:[{required:!0,message:`Please Input ${a}!`}],children:o}):c})};t.default=()=>{const[e]=l.Z.useForm(),[t,n]=(0,a.useState)(""),[s,d]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[w,C]=(0,a.useState)(!1),b=(0,a.useRef)(null);(0,a.useEffect)((()=>{I()}),[s]);let I=async()=>{C(!0);try{const e=await x.Z.DeletedTechnician(),t=e.data.data.sort(((e,t)=>new Date(t.created_date)-new Date(e.created_date)));n(t)}catch(e){console.log(e)}finally{C(!1)}};const N=e=>e.key===m,S=()=>{g("")},v=[{title:"S.No",dataIndex:"sNo",width:"5%",editable:!0,render:(e,t,n)=>n+1},{title:"Name",dataIndex:"name",width:"15%",editable:!0,fixed:"left",render:(e,t)=>`${t.firstName} ${t.lastName}`},{title:"Phone",dataIndex:"phone",width:"12%",editable:!0,render:(e,t)=>`${t.phoneNumber}`},{title:"Email",dataIndex:"email",width:"20%",editable:!0},{title:"Created Date",dataIndex:"created_date",width:"15%",render:e=>p()(e).format("DD-MM-YYYY")},{title:"Action",width:"10%",dataIndex:"action",fixed:"right",render:(a,c)=>N(c)?(0,f.jsxs)("span",{children:[(0,f.jsx)(r.Z.Link,{onClick:()=>(async a=>{try{const i=await e.validateFields(),c=[...t],s=c.findIndex((e=>a===e.key));if(s>-1){const e=c[s];c.splice(s,1,{...e,...i}),n(c),g("")}else c.push(i),n(c),g("")}catch(i){console.log("Validate Failed:",i)}})(c.key),style:{marginRight:8},children:"Save"}),(0,f.jsx)(o.Z,{title:"Sure to cancel?",onConfirm:S,children:(0,f.jsx)("a",{children:"Cancel"})})]}):(0,f.jsx)("div",{className:"d-flex gap-3 justify-content-center",children:(0,f.jsx)("span",{className:"",children:(0,f.jsx)(i.ZP,{type:"primary",className:"tech-btn",onClick:()=>(async e=>{const t=await x.Z.RestoreTechnician(e);t&&(k.Am.success("Technician Restored Successfully"),d(t))})(c._id),children:"Restore"})})})}].map((e=>e.editable?{...e,onCell:t=>({record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:N(t)})}:e));return(0,f.jsxs)(f.Fragment,{children:[w&&(0,f.jsx)(Z.Z,{show:w}),(0,f.jsxs)(c.Z,{title:" Restore Technician ",children:[(0,f.jsx)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:(0,f.jsx)(u.Z,{onChange:e=>{const a=e.target.value;if(j(a),""===a)I();else{const e=t.filter((e=>e.firstName.toLowerCase().includes(a.toLowerCase())));n(e)}},placeholder:"Search by name",value:y,style:{width:"150px",marginLeft:"20px"}})}),(0,f.jsx)(l.Z,{form:e,component:!1,children:(0,f.jsx)("div",{ref:b,children:(0,f.jsx)(h.Z,{components:{body:{cell:T}},bordered:!0,dataSource:t,columns:v,rowClassName:"editable-row",pagination:{onChange:S},scroll:{x:2e3}})})}),(0,f.jsx)(k.Ix,{})]})]})}}}]);