"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[266],{81325:function(e,t,a){var n=a(66585);t.Z={createTechnician:e=>n.Z.Post("technician/createTechnician",e),technicianList:e=>n.Z.Get("technician/getTechnician",e),technicianTask:e=>n.Z.Get("task/getTasks",e),createTechnicianTask:e=>n.Z.Post("task/createTask",e),DeleteTechinician:e=>{let t=`technician/delete/${e}`;return n.Z.Post(t)},DeletedTechnician:e=>n.Z.Get("technician/all/deletedTechnician",e),RestoreTechnician:e=>{const t=`technician/delete/technician/${e}`;return n.Z.Post(t)},TechnicianCount:e=>n.Z.Get("company/totalTechnician",e),StartTaskCount:e=>n.Z.Get("task/start/taskcount",e),OngoingTaskCount:e=>n.Z.Get("task/ongoing/taskcount",e),CompletedTaskCount:e=>n.Z.Get("task/completed/taskcount",e),RegisterTechnicican:e=>n.Z.Post("otherauth/technicianRegister",e),EditTechnician:e=>{const t=`technician/editTechnician/${e.id}`;return n.Z.Post(t,e)},GetReports:e=>n.Z.Get("task/completedTaskDetails/",e),deleteTask:e=>n.Z.Post("task/delete/task",e)}},89905:function(e,t,a){a.r(t);var n=a(47313),i=a(31046),c=a(33497),s=a(57884),o=a(11396),l=a(22834),d=a(71820),r=a(67118),h=a(44057),u=a(81325),m=a(70816),k=a.n(m),T=a(97890),x=a(46417);t.default=()=>{const[e,t]=(0,n.useState)(!1),[a]=s.Z.useForm(),[m,g]=(0,n.useState)(""),[p,Z]=(0,n.useState)(""),C=(0,T.s0)(),w=()=>{t(!0)};(0,n.useEffect)((()=>{"true"===localStorage.getItem("login")?f():C("/")}),[]);const f=async()=>{try{const e=(await u.Z.technicianTask()).data.Results,t=e.reduce(((e,t)=>{var a;return e.push(...null===(a=t.technicians[0])||void 0===a?void 0:a.tasks),e}),[]).filter((e=>"ongoing"===e.status));g(t)}catch(e){console.error("Error fetching tasks:",e)}},b=()=>(0,x.jsx)(o.Z,{title:"Click Here to manually complete the task !",children:(0,x.jsx)(l.ZP,{onClick:w,style:{backgroundColor:"#21A063",color:"white"},children:"Completed"})}),y=[{title:"S.No",dataIndex:"sNo",width:"5%",editable:!0,render:(e,t,a)=>a+1},{title:"Service ID",dataIndex:"_id",width:"10%",editable:!0},{title:"Service Name",dataIndex:"serviceName",width:"15%",editable:!0},{title:" Customer Name",dataIndex:"companyName",width:"13%",editable:!0},{title:" Technician Name",children:[{title:"Technician Name",dataIndex:"assignedTo",width:"10%",render:(e,t)=>t.assignedTo&&t.assignedTo.map((e=>`${e.firstName} ${e.lastName}`))},{title:"Technician-2",dataIndex:"technicianname2",width:"10%",editable:!0}]},{title:"Start Date",dataIndex:"startDate",width:"10%",editable:!0,render:e=>k()(e).format("DD-MM-YYYY")},{title:"Status",dataIndex:"status",width:"5%",editable:!0,fixed:"right",render:()=>(0,x.jsx)(l.ZP,{style:{cursor:"no-drop",backgroundColor:"#E0D730",color:"white"},children:"Ongoing"})},{title:"Action",dataIndex:"action",width:"5%",editable:!0,fixed:"right",render:()=>(0,x.jsx)(b,{})}].map((e=>e.editable?{...e,onCell:t=>({record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title})}:e));return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(c.Z,{title:" Ongoing Tasks ",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:[(0,x.jsx)(i.Z,{children:"Download"}),(0,x.jsx)(r.Z,{onChange:e=>{const t=e.target.value;Z(t);const a=m.filter((e=>e.serviceName.toLocaleLowerCase().includes(t.toLocaleLowerCase())));g(a)},placeholder:"Search by date",value:p,style:{width:"150px",marginLeft:"20px"}})]}),(0,x.jsx)(s.Z,{form:a,component:!1,children:(0,x.jsx)(d.Z,{dataSource:m,columns:y,pagination:{},scroll:{x:2e3}})}),(0,x.jsx)(h.Z,{show:e,modalTitle:"Task Complete Manually",modalContent:"Are you sure you want to Complete the task manually  ?",onClose:()=>{t(!1)},onConfirm:()=>{t(!1)}})]})})}}}]);