"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[825],{86460:function(e,t,a){var d=a(66585);t.Z={CreateQrcode:e=>d.Z.Post("qrcode/createQr",e),GetQrcodes:e=>d.Z.Get("qrcode/getQrcode",e),DeletedQrcode:e=>{const t=`qrcode/deleteQrcode/${e}`;return d.Z.Post(t,e)},GetTotalQrcodes:e=>d.Z.Get("qrcode/totalQrcodes",e),getQrcodeById:e=>{const t=`qrcode/getQrcodeById/${e}`;return d.Z.Get(t,e)},detleteQrTitle:e=>d.Z.Post("qrcode/deleteTitle",e)}},47825:function(e,t,a){a.r(t);var d=a(47313),l=a(91287),s=a(96892),i=a(1834),n=a(33497),r=a(86121),c=a(43690),o=a(57884),h=a(71820),u=(a(31046),a(86460)),x=a(67118),m=a(41948),f=a(70816),j=a.n(f),g=a(97440),y=a(29385),p=a(48964),w=a(65213),Z=a(97890),S=a(46417);const I=e=>{let{editing:t,dataIndex:a,title:d,inputType:l,children:s,...i}=e;const n="number"===l?(0,S.jsx)(r.Z,{}):(0,S.jsx)(c.Z,{});return(0,S.jsx)("td",{...i,children:t?(0,S.jsx)(o.Z.Item,{name:a,style:{margin:0},rules:[{required:!0,message:`Please Input ${d}!`}],children:n}):s})};t.default=()=>{const[e]=o.Z.useForm(),[t,a]=(0,d.useState)(""),[r,c]=(0,d.useState)(""),[f,Q]=(0,d.useState)(""),[b,v]=(0,d.useState)(""),[C,D]=(0,d.useState)(null),[N,q]=(0,d.useState)(!1),[k,T]=(0,d.useState)(!1),[R,Y]=(0,d.useState)([]),[_,F]=(0,d.useState)(""),[G,A]=(0,d.useState)(null),[L,M]=(0,d.useState)(""),[P,B]=(0,d.useState)(""),[E,$]=(0,d.useState)(""),H=(0,Z.s0)(),[z,V]=(0,d.useState)(!1);(0,d.useEffect)((()=>{"true"===localStorage.getItem("login")||H("/")}),[]),(0,d.useEffect)((()=>{const e=_._id;$(e)}),[_]),(0,d.useEffect)((()=>{W()}),[b,P]),(0,d.useEffect)((()=>{R&&console.log("qrcodeDetails",R)}),[R]);const W=async()=>{V(!0);try{const e=await u.Z.GetQrcodes(),t=e.data.data.sort(((e,t)=>new Date(t.created_date)-new Date(e.created_date)));a(t)}catch(e){console.log(e)}finally{V(!1)}},J=e=>e.key===r,K=()=>{c("")},O=[{title:"SNo",dataIndex:"sNo",width:"5%",editable:!0,render:(e,t,a)=>a+1},{title:"QR Title",dataIndex:"qrTitle",width:"15%",editable:!0,fixed:"left"},{title:"ServiceName",dataIndex:"serviceName",width:"12%",editable:!0,render:(e,t)=>`${t.serviceName}`},{title:"CustomerName",dataIndex:"customerName",width:"20%",editable:!0},{title:"No.of QR Codes",dataIndex:"",width:"10%",render:(e,t)=>t.titles.length},{title:"Start Date",dataIndex:"startDate",width:"15%",editable:!0,render:e=>j()(e).format("DD-MM-YYYY")},{title:"Qr code Format",dataIndex:"format",width:"15%",editable:!0},{title:"Width",dataIndex:"width",width:"15%",editable:!0},{title:"Height",dataIndex:"height",width:"15%",editable:!0},{title:"Created Date",dataIndex:"created_date",width:"15%",editable:!0,render:e=>j()(e).format("DD-MM-YYYY")},{title:"Action",width:"10%",dataIndex:"action",fixed:"right",render:(d,n)=>J(n)?(0,S.jsxs)("span",{children:[(0,S.jsx)(l.Z.Link,{onClick:()=>(async d=>{try{const l=await e.validateFields(),s=[...t],i=s.findIndex((e=>d===e.key));if(i>-1){const e=s[i];s.splice(i,1,{...e,...l}),a(s),c("")}else s.push(l),a(s),c("")}catch(l){console.log("Validate Failed:",l)}})(n.key),style:{marginRight:8},children:"Save"}),(0,S.jsx)(s.Z,{title:"Sure to cancel?",onConfirm:K,children:(0,S.jsx)("a",{children:"Cancel"})})]}):(0,S.jsx)("div",{className:"d-flex gap-3 justify-content-center",children:(0,S.jsx)("span",{children:(0,S.jsx)(l.Z.Link,{onClick:()=>{return Y((e=n).titles,(()=>{console.log("qrcodeDetails",R)})),F(e,(()=>{})),void T(!0);var e},children:(0,S.jsx)(i.IT9,{})})})})}].map((e=>e.editable?{...e,onCell:t=>({record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:J(t)})}:e)),U=R&&R.map(((e,t)=>({value:t+1,label:e.title})));return(0,S.jsxs)(S.Fragment,{children:[z&&(0,S.jsx)(w.Z,{show:z}),(0,S.jsxs)(n.Z,{title:"Manage QR Code ",children:[(0,S.jsx)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:(0,S.jsx)(x.Z,{onChange:e=>{const d=e.target.value;if(Q(d),""===d)W();else{const e=t.filter((e=>e.qrTitle.toLowerCase().includes(d.toLowerCase())));a(e)}},placeholder:"Search QR title",value:f,style:{width:"150px",marginLeft:"20px"}})}),(0,S.jsx)(o.Z,{form:e,component:!1,children:(0,S.jsx)(h.Z,{components:{body:{cell:I}},bordered:!0,dataSource:t,columns:O,rowClassName:"editable-row",pagination:{onChange:K},scroll:{x:2e3}})}),(0,S.jsxs)(y.Z,{show:k,onHide:()=>T(!1),children:[(0,S.jsx)(y.Z.Header,{closeButton:!0,children:(0,S.jsx)(y.Z.Title,{children:"Delete QR code"})}),(0,S.jsx)(y.Z.Body,{children:(0,S.jsxs)("div",{className:"d-flex justify-content-center flex-column",children:[_&&(0,S.jsxs)("div",{children:[(0,S.jsxs)("h6",{children:["QR Title : ",_.qrTitle," "]}),(0,S.jsxs)("h6",{children:["Service Name : ",_.serviceName," "]}),(0,S.jsxs)("h6",{children:["Customer Name : ",_.customerName," "]})]}),(0,S.jsx)("p",{className:"pt-3",children:" Do you want to delete QR codes? Select here and delete"}),(0,S.jsx)(p.ZP,{className:"seletec-title",options:U,styles:{menu:(e,t)=>({...e,position:"relative",zIndex:"9999"})},required:!0,isSearchable:!0,placeholder:"Select QR Details",onChange:e=>{A(e);const t=e&&e.label,a=R.find((e=>e.title===t));if(a){const e=a._id;M(e)}}})]})}),(0,S.jsxs)(y.Z.Footer,{children:[(0,S.jsx)(g.Z,{variant:"secondary",onClick:()=>(async e=>{V(!0);try{const t=await u.Z.DeletedQrcode(e);T(!1),m.Am.success("QR code Deleted successfully"),v(t),window.location.reload()}catch(t){console.log(t)}finally{V(!1)}})(E),children:"Delete All"}),(0,S.jsx)(g.Z,{variant:"danger",onClick:async()=>{V(!0);try{const e=await u.Z.detleteQrTitle({qrId:_._id,titleId:L});T(!1),B(e.data.data),m.Am.success("QR Code deleted Sucessfully ")}catch(e){m.Am.error(e)}finally{V(!1)}},disabled:!G,children:"Delete selected QR"})]})]}),(0,S.jsx)(m.Ix,{})]})]})}}}]);