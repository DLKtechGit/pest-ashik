"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[334],{81325:function(e,t,a){var n=a(66585);t.Z={createTechnician:e=>n.Z.Post("technician/createTechnician",e),technicianList:e=>n.Z.Get("technician/getTechnician",e),technicianTask:e=>n.Z.Get("task/getTasks",e),createTechnicianTask:e=>n.Z.Post("task/createTask",e),DeleteTechinician:e=>{let t=`technician/delete/${e}`;return n.Z.Post(t)},DeletedTechnician:e=>n.Z.Get("technician/all/deletedTechnician",e),RestoreTechnician:e=>{const t=`technician/delete/technician/${e}`;return n.Z.Post(t)},TechnicianCount:e=>n.Z.Get("company/totalTechnician",e),StartTaskCount:e=>n.Z.Get("task/start/taskcount",e),OngoingTaskCount:e=>n.Z.Get("task/ongoing/taskcount",e),CompletedTaskCount:e=>n.Z.Get("task/completed/taskcount",e),RegisterTechnicican:e=>n.Z.Post("otherauth/technicianRegister",e),EditTechnician:e=>{const t=`technician/editTechnician/${e.id}`;return n.Z.Post(t,e)},GetReports:e=>n.Z.Get("task/completedTaskDetails/",e),deleteTask:e=>n.Z.Post("task/delete/task",e)}},4334:function(e,t,a){a.r(t);var n=a(47313),i=(a(31046),a(33497)),o=a(57884),r=a(71820),s=a(67118),l=a(81325),d=a(70816),c=a.n(d),h=a(69099),p=a(86893),u=(a(88379),a(65213)),m=a(97890),v=a(46417);t.default=()=>{const[e]=o.Z.useForm(),[t,a]=(0,n.useState)([]);console.log("data",t);const[d,x]=(0,n.useState)(""),[g,f]=(0,n.useState)(null),[S,y]=(0,n.useState)(""),[b,j]=(0,n.useState)(""),[Z,w]=(0,n.useState)(!1),[C,z]=(0,n.useState)([]),[T,k]=(0,n.useState)(""),$=(0,m.s0)();(0,n.useEffect)((()=>{"true"===localStorage.getItem("login")?N():$("/")}),[]);const N=async()=>{w(!0);try{const e=await l.Z.technicianTask(),t=e.data.Results.reduce(((e,t)=>{var a;return e.push(...null===(a=t.technicians[0])||void 0===a?void 0:a.tasks),e}),[]),n=t.filter((e=>"completed"===e.status)).reverse();a(n)}catch(e){console.error("Error fetching tasks:",e)}finally{w(!1)}};console.log("data",t);const I=[{title:"S.No",dataIndex:"sNo",width:"5%",render:(e,t,a)=>a+1},{title:"Service Name",dataIndex:"QrCodeCategory",width:"8%",render:(e,t)=>{var a,n,i,o;return(0,v.jsx)(v.Fragment,{children:e&&e.length>0?(0,v.jsxs)(v.Fragment,{children:[e.map(((e,t)=>(0,v.jsx)("div",{className:"mb-2",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700",textAlign:"left"},children:[e.category," :"]}),e.subCategory.map(((e,t)=>(0,v.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,v.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))]})},t))),(0,v.jsxs)("div",{style:{textAlign:"left"},children:[null===t||void 0===t||null===(a=t.noqrcodeService)||void 0===a?void 0:a.map(((e,t)=>(0,v.jsx)("div",{className:"mb-2",children:(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700"},children:[e.category," :"]})})},t))),2!=(null===e||void 0===e?void 0:e.length)&&t.serviceName&&"General Pest Control"!=(null===(n=e[0])||void 0===n?void 0:n.category)&&(0,v.jsx)("div",{className:"mb-2",children:t.serviceName.map(((e,t)=>(0,v.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,v.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))})]})]}):(0,v.jsx)("div",{style:{textAlign:"left"},children:(null===t||void 0===t?void 0:t.noqrcodeService)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mb-2",children:(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700"},children:[null===t||void 0===t||null===(i=t.noqrcodeService[0])||void 0===i?void 0:i.category," :"]})})}),(0,v.jsx)("div",{className:"mb-2",children:null===t||void 0===t||null===(o=t.noqrcodeService[0])||void 0===o?void 0:o.subCategory.map(((e,t)=>(0,v.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,v.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))})]})})})}},{title:"Customer Name",dataIndex:"companyName",width:"10%"},{title:" Technician Name",title:"Technician Name",dataIndex:"assignedTo",width:"10%",render:(e,t)=>t.technicianDetails&&`${t.technicianDetails.firstName} ${t.technicianDetails.lastName}`},{title:"Details",dataIndex:"assignedTo",width:"12%",render:(e,t)=>{var a,n,i;const o=t.technicianStartDate,r=t.technicianStartTime,s=(t.endTime,t.technicianStartTime);k(s);const l=t.completedDetails.endTime;z(l);const d=((e,t)=>{const a=c()(e,"HH:mm:ss"),n=c()(t,"HH:mm:ss"),i=c().duration(n.diff(a)),o=Math.floor(i.asHours()),r=Math.floor(i.asMinutes())%60,s=Math.floor(i.asSeconds())%60;return`${String(o).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(s).padStart(2,"0")}`})(r,l),h=(null===t||void 0===t||null===(a=t.QrCodeCategory)||void 0===a?void 0:a.length)>0?null===(n=t.QrCodeCategory)||void 0===n?void 0:n.map((e=>e.subCategoryStatus)).flat():null===(i=t.noqrcodeService)||void 0===i?void 0:i.map((e=>e.subCategoryStatus)).flat(),p=[];p.push(h);const u=p[0].map((e=>e.pauseDetails)),m=u.flat(),x=null===m||void 0===m?void 0:m.reduce(((e,t)=>e+(e=>{const[t,a,n]=e.split(":").map(Number);return 3600*t+60*a+n})(null===t||void 0===t?void 0:t.pauseTiming)),0),g=(f=x,`${Math.floor(f/3600)} Hrs ${Math.floor(f%3600/60)} minutes ${f%60} Sec`);var f;const S=(e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(n).padStart(2,"0")}`})(x),y=((e,t)=>{const a=c().duration(e),n=c().duration(t),i=a.subtract(n);return`${String(Math.floor(i.asHours())).padStart(2,"0")} Hrs ${String(i.minutes()).padStart(2,"0")} Mins ${String(i.seconds()).padStart(2,"0")} Sec`})(d,S);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{style:{textAlign:"left"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"Assigned Date :"})," ",c()(t.startDate).format("DD-MM-YYYY")]}),(0,v.jsxs)("div",{style:{textAlign:"left"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"Completed Date :"})," ",o]}),(0,v.jsxs)("div",{style:{textAlign:"left"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"Start Time :"})," ",r]}),(0,v.jsxs)("div",{style:{textAlign:"left"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"End Time :"})," ",t.completedDetails.endTime]}),(0,v.jsxs)("div",{style:{textAlign:"left",marginTop:"10px"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"Total Working hrs "}),(0,v.jsx)("div",{children:y})]}),(0,v.jsxs)("div",{children:[m&&m.map(((e,t)=>(0,v.jsxs)("div",{style:{textAlign:"left",marginTop:"10px"},children:[(0,v.jsxs)("span",{style:{fontWeight:"600"},children:[t+1,"."]}),"  ",e.pauseReason," - ",e.pauseTiming]},t))),(0,v.jsxs)("div",{style:{textAlign:"left"},children:[(0,v.jsx)("span",{style:{fontWeight:"600"},children:"Total break hrs "}),(0,v.jsx)("div",{children:g})]})]})]})}},{title:"Action",width:"10%",dataIndex:"action",fixed:"right",render:(e,t)=>(0,v.jsx)("div",{className:"d-flex gap-3 justify-content-center",children:(0,v.jsx)("span",{children:(0,v.jsx)(h.Z,{type:"primary",onClick:()=>(e=>{const t=window.open(),a="https://pestpatrolapp.com/api/"+e;t.document.write(`\n        <html>\n            <head>\n                <title>PDF Viewer</title>\n            </head>\n            <body style="margin: 0;">\n                <iframe src="${a}" style="width:100%; height:100%;" frameborder="0"></iframe>\n            </body>\n        </html>\n    `),t.document.close()})(t.pdf),className:"tech-btn",children:"View PDF"})})})}],R=g?t.filter((e=>c()(e.startDate).isSame(g,"day"))):t;console.log("filtereddtata",R);return(0,v.jsxs)(v.Fragment,{children:["   ",Z&&(0,v.jsx)(u.Z,{show:Z}),(0,v.jsxs)(i.Z,{title:"Reports",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-end",style:{position:"relative",bottom:"10px"},children:[(0,v.jsx)(p.Z,{style:{width:"150px",height:"30px"},placeholder:"Search date",onChange:e=>{console.log("date",e),f(e)},format:"dd-MM-yyyy"}),(0,v.jsx)(s.Z,{onChange:e=>{const n=e.target.value;if(y(n),""===n)N();else{const e=t.filter((e=>e.companyName.toLowerCase().includes(n.toLowerCase())));a(e)}},placeholder:"Search Customer",value:S,style:{width:"150px",height:"35px",marginLeft:"20px"}}),"      "]}),(0,v.jsx)(o.Z,{form:e,component:!1,children:(0,v.jsx)(r.Z,{bordered:!0,dataSource:R,columns:I,pagination:{}})})]})]})}},69099:function(e,t,a){a.d(t,{Z:function(){return C}});var n=a(63366),i=a(87462),o=a(47313),r=a(83061),s=a(29023),l=a(21921),d=a(17551),c=a(88564),h=a(25469),p=a(67999),u=a(91615),m=a(77430),v=a(32298);function x(e){return(0,v.Z)("MuiButton",e)}var g=(0,m.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var f=o.createContext({}),S=a(46417);const y=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],b=e=>(0,i.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),j=(0,c.ZP)(p.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${(0,u.Z)(a.color)}`],t[`size${(0,u.Z)(a.size)}`],t[`${a.variant}Size${(0,u.Z)(a.size)}`],"inherit"===a.color&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:a}=e;var n,o;return(0,i.Z)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,i.Z)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,d.Fq)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,d.Fq)(t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:`1px solid ${(t.vars||t).palette[a.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,d.Fq)(t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:(t.vars||t).palette.grey.A100,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}}),"&:active":(0,i.Z)({},"contained"===a.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${g.focusVisible}`]:(0,i.Z)({},"contained"===a.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${g.disabled}`]:(0,i.Z)({color:(t.vars||t).palette.action.disabled},"outlined"===a.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"outlined"===a.variant&&"secondary"===a.color&&{border:`1px solid ${(t.vars||t).palette.action.disabled}`},"contained"===a.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(t.vars||t).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(t.vars||t).palette[a.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:`1px solid ${(0,d.Fq)(t.palette[a.color].main,.5)}`},"contained"===a.variant&&{color:t.vars?t.vars.palette.text.primary:null==(n=(o=t.palette).getContrastText)?void 0:n.call(o,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],boxShadow:(t.vars||t).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${g.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${g.disabled}`]:{boxShadow:"none"}}})),Z=(0,c.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,t[`iconSize${(0,u.Z)(a.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,i.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},b(t))})),w=(0,c.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,t[`iconSize${(0,u.Z)(a.size)}`]]}})((e=>{let{ownerState:t}=e;return(0,i.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},b(t))}));var C=o.forwardRef((function(e,t){const a=o.useContext(f),d=(0,s.Z)(a,e),c=(0,h.Z)({props:d,name:"MuiButton"}),{children:p,color:m="primary",component:v="button",className:g,disabled:b=!1,disableElevation:C=!1,disableFocusRipple:z=!1,endIcon:T,focusVisibleClassName:k,fullWidth:$=!1,size:N="medium",startIcon:I,type:R,variant:M="text"}=c,W=(0,n.Z)(c,y),D=(0,i.Z)({},c,{color:m,component:v,disabled:b,disableElevation:C,disableFocusRipple:z,fullWidth:$,size:N,type:R,variant:M}),L=(e=>{const{color:t,disableElevation:a,fullWidth:n,size:o,variant:r,classes:s}=e,d={root:["root",r,`${r}${(0,u.Z)(t)}`,`size${(0,u.Z)(o)}`,`${r}Size${(0,u.Z)(o)}`,"inherit"===t&&"colorInherit",a&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,u.Z)(o)}`],endIcon:["endIcon",`iconSize${(0,u.Z)(o)}`]},c=(0,l.Z)(d,x,s);return(0,i.Z)({},s,c)})(D),E=I&&(0,S.jsx)(Z,{className:L.startIcon,ownerState:D,children:I}),F=T&&(0,S.jsx)(w,{className:L.endIcon,ownerState:D,children:T});return(0,S.jsxs)(j,(0,i.Z)({ownerState:D,className:(0,r.Z)(a.className,L.root,g),component:v,disabled:b,focusRipple:!z,focusVisibleClassName:(0,r.Z)(L.focusVisible,k),ref:t,type:R},W,{classes:L,children:[E,p,F]}))}))}}]);