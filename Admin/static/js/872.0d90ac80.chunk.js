"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[872],{92703:function(e,s,t){var a=t(66585);s.Z={AdminLogin:e=>a.Z.Post("adminauth/registeradmin",e),GetAdmins:e=>a.Z.Get("adminauth/getAllAdmins",e),AdminDelete:e=>{const s=`adminauth/admindelete/${e}`;return a.Z.Post(s,e)},AdminCount:e=>a.Z.Get("adminauth/admin/count",e),AdminChildLogin:e=>a.Z.Post("adminauth/login/admin",e),ForgotPassword:e=>a.Z.Post("adminauth/forgot",e),ResetPassword:e=>a.Z.Post("/adminauth/reset/password/:randomString/:expirationTimestmpa",e)}},67872:function(e,s,t){t.r(s),t.d(s,{default:function(){return P}});var a=t(9019),r=t(33497),i=t(47313),n=t(19860),o=t(1550),l=t(23306),d=t(37843),m=t(15480),u=t(41727),c=t(47131),h=t(57829),g=t(69099),p=t(61113),x=t(3463),Z=t(79429),j=t(41948),v=t(10237),w=t(22611),b=t(92703),f=t(65213),y=t(46417);var A=()=>{const e=JSON.parse(localStorage.getItem("userData"));console.log("userData",e);const s=(0,n.Z)(),[t,a]=(0,i.useState)(!1),[r,A]=(0,i.useState)(!1),S=()=>{a(!t)},P=e=>{e.preventDefault()};return(0,y.jsxs)(y.Fragment,{children:[r&&(0,y.jsx)(f.Z,{show:r}),(0,y.jsx)("div",{style:{height:"400px"},children:(0,y.jsx)(Z.J9,{initialValues:{email:"",password:"",role:"childadmin",submit:null},validationSchema:x.Ry().shape({email:x.Z_().email("Must be a valid email").max(255).required("Email is required"),password:x.Z_().max(255).required("Password is required"),role:x.Z_().required("Role is required")}),onSubmit:async(e,s)=>{let{setErrors:t,setStatus:a,setSubmitting:r,resetForm:i}=s;A(!0);try{const s=await b.Z.AdminLogin(e);if(console.log("response",s.data.message),s&&200===s.status){var n;i(),a({success:!0}),r(!1),j.Am.success(null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)}else{var o;const e=null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message;a({success:!1}),t({submit:e}),r(!1),j.Am.error(e)}}catch(l){console.error(l),a({success:!1}),t({submit:l}),r(!1),j.Am.error(l)}finally{A(!1)}},children:a=>{let{errors:r,handleBlur:i,handleChange:n,handleSubmit:x,isSubmitting:Z,touched:j,values:b}=a;return(0,y.jsx)("form",{className:"mt-5",noValidate:!0,onSubmit:x,children:"superadmin"===e.role?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(o.Z,{className:"mt-4",fullWidth:!0,error:Boolean(j.email&&r.email),sx:{...s.typography.customInput},children:[(0,y.jsx)(l.Z,{htmlFor:"outlined-adornment-email-register",children:"Email Address / Username"}),(0,y.jsx)(d.Z,{id:"outlined-adornment-email-register",type:"email",value:b.email,name:"email",onBlur:i,onChange:n,inputProps:{}}),j.email&&r.email&&(0,y.jsx)(m.Z,{error:!0,id:"standard-weight-helper-text--register",children:r.email})]}),(0,y.jsxs)(o.Z,{fullWidth:!0,error:Boolean(j.password&&r.password),sx:{...s.typography.customInput},children:[(0,y.jsx)(l.Z,{htmlFor:"outlined-adornment-password-register",children:"Password"}),(0,y.jsx)(d.Z,{id:"outlined-adornment-password-register",type:t?"text":"password",value:b.password,name:"password",label:"Password",onBlur:i,onChange:n,endAdornment:(0,y.jsx)(u.Z,{position:"end",children:(0,y.jsx)(c.Z,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:P,edge:"end",size:"large",children:t?(0,y.jsx)(v.Z,{}):(0,y.jsx)(w.Z,{})})}),inputProps:{}})]}),(0,y.jsx)(h.Z,{sx:{mt:2},children:(0,y.jsx)(g.Z,{className:"tech-btn",disableElevation:!0,disabled:Z,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Create login"})})]}):(0,y.jsx)(p.Z,{variant:"body1",color:"textSecondary",children:"This feature is only available for superAdmin."})})}})}),(0,y.jsx)(j.Ix,{})]})},S=t(97890);var P=()=>{const e=(0,S.s0)();return(0,i.useEffect)((()=>{"true"===localStorage.getItem("login")||e("/")}),[]),(0,y.jsx)(r.Z,{title:"Create Child Admin",children:(0,y.jsx)(a.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,y.jsx)(A,{})})})}}}]);