"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[42],{81325:function(e,t,n){var a=n(66585);t.Z={createTechnician:e=>a.Z.Post("technician/createTechnician",e),technicianList:e=>a.Z.Get("technician/getTechnician",e),technicianTask:e=>a.Z.Get("task/getTasks",e),createTechnicianTask:e=>a.Z.Post("task/createTask",e),DeleteTechinician:e=>{let t=`technician/delete/${e}`;return a.Z.Post(t)},DeletedTechnician:e=>a.Z.Get("technician/all/deletedTechnician",e),RestoreTechnician:e=>{const t=`technician/delete/technician/${e}`;return a.Z.Post(t)},TechnicianCount:e=>a.Z.Get("company/totalTechnician",e),StartTaskCount:e=>a.Z.Get("task/start/taskcount",e),OngoingTaskCount:e=>a.Z.Get("task/ongoing/taskcount",e),CompletedTaskCount:e=>a.Z.Get("task/completed/taskcount",e),RegisterTechnicican:e=>a.Z.Post("otherauth/technicianRegister",e),EditTechnician:e=>{const t=`technician/editTechnician/${e.id}`;return a.Z.Post(t,e)},GetReports:e=>a.Z.Get("task/completedTaskDetails/",e),deleteTask:e=>a.Z.Post("task/delete/task",e)}},1042:function(e,t,n){n.r(t);var a=n(47313),i=(n(31046),n(33497)),s=n(57884),l=(n(11396),n(22834)),c=n(71820),d=n(67118),r=n(44057),o=n(81325),h=n(70816),x=n.n(h),m=n(86893),u=(n(88379),n(65213)),g=n(97890),f=n(46417);t.default=()=>{const[e,t]=(0,a.useState)(!1),[n]=s.Z.useForm(),[h,v]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[p,T]=(0,a.useState)(null),[k,N]=(0,a.useState)(""),[w,C]=(0,a.useState)([]),[Z,b]=(0,a.useState)(!1),S=(0,g.s0)();(0,a.useEffect)((()=>{"true"===localStorage.getItem("login")?D():S("/")}),[]);const D=async()=>{b(!0);try{const e=await o.Z.technicianTask(),t=e.data.Results.reduce(((e,t)=>{var n;return e.push(...null===(n=t.technicians[0])||void 0===n?void 0:n.tasks),e}),[]),n=t.filter((e=>"ongoing"===e.status)).sort(((e,t)=>new Date(t.startDate)-new Date(e.startDate)));v(n)}catch(e){console.error("Error fetching tasks:",e)}finally{b(!1)}};console.log("data",h);const I=p?h.filter((e=>x()(e.startDate).isSame(p,"day"))):h,G=[{title:"S.No",dataIndex:"sNo",width:"3%",editable:!0,render:(e,t,n)=>n+1},{title:"Service Name",dataIndex:"QrCodeCategory",width:"8%",render:(e,t)=>{var n,a,i,s;return(0,f.jsx)(f.Fragment,{children:e&&e.length>0?(0,f.jsxs)(f.Fragment,{children:[e.map(((e,t)=>(0,f.jsx)("div",{className:"mb-2",children:(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700",textAlign:"left"},children:[e.category," :"]}),e.subCategory.map(((e,t)=>(0,f.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,f.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))]})},t))),(0,f.jsxs)("div",{style:{textAlign:"left"},children:[null===t||void 0===t||null===(n=t.noqrcodeService)||void 0===n?void 0:n.map(((e,t)=>(0,f.jsx)("div",{className:"mb-2",children:(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700"},children:[e.category," :"]})})},t))),2!=(null===e||void 0===e?void 0:e.length)&&t.serviceName&&"General Pest Control"!=(null===(a=e[0])||void 0===a?void 0:a.category)&&(0,f.jsx)("div",{className:"mb-2",children:t.serviceName.map(((e,t)=>(0,f.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,f.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))})]})]}):(0,f.jsx)("div",{style:{textAlign:"left"},children:(null===t||void 0===t?void 0:t.noqrcodeService)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"mb-2",children:(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"fonts13 textLeft",style:{fontWeight:"700"},children:[null===t||void 0===t||null===(i=t.noqrcodeService[0])||void 0===i?void 0:i.category," :"]})})}),(0,f.jsx)("div",{className:"mb-2",children:null===t||void 0===t||null===(s=t.noqrcodeService[0])||void 0===s?void 0:s.subCategory.map(((e,t)=>(0,f.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:(0,f.jsxs)("div",{className:"d-flex align-items-center fonts13 textLeft",children:[t+1,". ",e]})},t)))})]})})})}},{title:" Customer Name",dataIndex:"companyName",width:"8%",editable:!0},{title:" Technician Name",children:[{title:"Technician Name",dataIndex:"assignedTo",width:"8%",render:(e,t)=>t.technicianDetails&&`${t.technicianDetails.firstName} ${t.technicianDetails.lastName}`},{title:"Technician-2",dataIndex:"otherTechnicianName",width:"8%",editable:!0,render:(e,t)=>t.otherTechnicianName?t.otherTechnicianName:"-"}]},{title:"Details",dataIndex:"assignedTo",width:"6%",render:(e,t)=>{const n=t.technicianStartDate,a=t.technicianStartTime;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{style:{textAlign:"left"},children:[(0,f.jsx)("span",{style:{fontWeight:"600"},children:"Assigned Date :"})," ",x()(t.startDate).format("DD-MM-YYYY")]}),(0,f.jsxs)("div",{style:{textAlign:"left"},children:[(0,f.jsx)("span",{style:{fontWeight:"600"},children:"Start Date :"})," ",n]}),(0,f.jsxs)("div",{style:{textAlign:"left"},children:[(0,f.jsx)("span",{style:{fontWeight:"600"},children:"Start Time :"})," ",a]})]})}},{title:"QR Code Available",dataIndex:"available",width:"10%",editable:!0},{title:"Pause Reason",dataIndex:"pauseReason",width:"12%"},{title:"Status",dataIndex:"status",width:"5%",editable:!0,fixed:"right",render:()=>(0,f.jsx)(l.ZP,{style:{cursor:"no-drop",backgroundColor:"#E0D730",color:"white"},children:"Ongoing"})}],L=G.map((e=>e.editable?{...e,onCell:t=>({record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title})}:e));return(0,f.jsxs)(f.Fragment,{children:[Z&&(0,f.jsx)(u.Z,{show:Z}),(0,f.jsxs)(i.Z,{title:" Ongoing Tasks ",children:[(0,f.jsxs)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:[(0,f.jsx)(m.Z,{style:{width:"150px",height:"30px"},placeholder:"Search date",onChange:e=>{T(e)},format:"dd-MM-yyyy"}),(0,f.jsx)(d.Z,{onChange:e=>{const t=e.target.value;if(N(t),""===t)D();else{const e=h.filter((e=>e.companyName.toLowerCase().includes(t.toLowerCase())));v(e)}},placeholder:"Search Customer",value:k,style:{width:"150px",height:"35px",marginLeft:"20px"}})]}),(0,f.jsx)(s.Z,{form:n,component:!1,children:(0,f.jsx)(c.Z,{bordered:!0,dataSource:I,columns:L,pagination:{},scroll:{x:2e3}})}),(0,f.jsx)(r.Z,{show:e,modalTitle:"Task Complete Manually",modalContent:"Are you sure you want to Complete the task manually  ?",onClose:()=>{t(!1)},onConfirm:()=>{t(!1)}})]})]})}}}]);