"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[898],{72605:function(e,t,a){var s=a(47313),r=a(70551),i=a(81730),n=a(46417);const l=(0,s.forwardRef)(((e,t)=>{var a,s;let l,d,{children:o,type:c,direction:m,offset:u,scale:h}=e;switch(m){case"up":case"left":l=u,d=0;break;default:l=0,d=u}const[x,p]=(0,r.n)(l,d),[f,y]=(0,r.n)(l,d);switch(c){case"rotate":return(0,n.jsx)(i.E.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:o});case"slide":return"up"===m||"down"===m?(0,n.jsx)(i.E.div,{ref:t,animate:{y:void 0!==f?f:""},onHoverEnd:()=>y(),onHoverStart:()=>y(),children:o}):(0,n.jsx)(i.E.div,{ref:t,animate:{x:void 0!==x?x:""},onHoverEnd:()=>p(),onHoverStart:()=>p(),children:o});default:return"number"===typeof h&&(h={hover:h,tap:h}),(0,n.jsx)(i.E.div,{ref:t,whileHover:{scale:null===(a=h)||void 0===a?void 0:a.hover},whileTap:{scale:null===(s=h)||void 0===s?void 0:s.tap},children:o})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.Z=l},61898:function(e,t,a){a.r(t);var s=a(47313),r=a(57884),i=a(96892),n=a(71820),l=a(33497),d=a(31046),o=a(67118),c=a(98718),m=a(70816),u=a.n(m),h=a(35508),x=(a(18695),a(29385)),p=a(19860),f=a(24813),y=a(61113),v=a(69099),g=a(9019),j=a(32802),b=a(1550),w=a(23306),Z=a(37843),C=a(15480),S=a(41727),N=a(47131),E=a(57829),k=a(3463),I=a(79429),D=a(72605),P=a(10237),A=a(22611),Y=a(41948),_=a(65213),F=a(97890),B=a(46417);t.default=()=>{const[e,t]=(0,s.useState)(!1),[a]=r.Z.useForm(),[m,H]=(0,s.useState)([]),[L,M]=(0,s.useState)(""),[R,W]=(0,s.useState)(""),q=(0,s.useRef)(null),T=(0,p.Z)(),V=(0,f.Z)(T.breakpoints.down("md")),[z,O]=(0,s.useState)(!1),[J,U]=(0,s.useState)(""),[$,G]=(0,s.useState)(""),[K,Q]=(0,s.useState)(!1),X=(0,F.s0)();(0,s.useEffect)((()=>{"true"===localStorage.getItem("login")?te():X("/")}),[]);const ee=()=>{M("")},te=async()=>{Q(!0);try{const e=await c.Z.getCompany(),t=e.data.Results.sort(((e,t)=>new Date(t.created_date)-new Date(e.created_date)));H(t)}catch(e){console.error("Error fetching customer data:",e)}finally{Q(!1)}},ae=()=>{O(!z)},se=e=>{e.preventDefault()},re=[{title:"S.No",dataIndex:"sNo",width:"5%",editable:!0,render:(e,t,a)=>a+1},{title:"Name",dataIndex:"name",width:"15%",editable:!0,fixed:"left"},{title:"Phone",dataIndex:"phone",width:"12%",editable:!0,render:(e,t)=>`${t.phoneNumber}`},{title:"Email",dataIndex:"email",width:"20%",editable:!0},{title:"Country",dataIndex:"country",width:"15%",editable:!0},{title:"State",dataIndex:"state",width:"15%",editable:!0},{title:"City",dataIndex:"city",width:"15%",editable:!0},{title:"Address",dataIndex:"address",width:"15%",editable:!0},{title:"Created Date",dataIndex:"created_date",width:"15%",render:e=>u()(e).format("DD-MM-YYYY")},{title:"Action",width:"10%",dataIndex:"action",fixed:"right",render:(e,a)=>{const s=(e=>e.key===L)(a);return s?(0,B.jsxs)("span",{children:[(0,B.jsx)(y.Z.Link,{onClick:()=>ie(a.key),style:{marginRight:8},children:"Save"}),(0,B.jsx)(i.Z,{title:"Sure to cancel?",onConfirm:ee,children:(0,B.jsx)("a",{children:"Cancel"})})]}):(0,B.jsx)("div",{className:"d-flex gap-3 justify-content-center",children:(0,B.jsx)("span",{children:(0,B.jsx)(v.Z,{type:"primary",onClick:()=>(async(e,a,s)=>{U(s),G(a),t(!0)})(a._id,a.email,a.name),className:"tech-btn",children:"Create Login"})})})}}],ie=async e=>{try{const t=await a.validateFields(),s=[...m],r=s.findIndex((t=>e===t.key));if(r>-1){const e=s[r];s.splice(r,1,{...e,...t}),H(s),M("")}else s.push(t),H(s),M("")}catch(t){console.log("Validate Failed:",t)}};return(0,B.jsxs)(B.Fragment,{children:[K&&(0,B.jsx)(_.Z,{show:K}),(0,B.jsxs)(l.Z,{title:"Customers List",children:[(0,B.jsxs)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:[(0,B.jsx)(d.Z,{onClick:()=>{const e=new h.default,t=m.map(((e,t)=>({"S.No":t+1,Name:e.name,Phone:e.phoneNumber,Email:e.email,Country:e.country,State:e.state,City:e.city,Address:e.address,"Created Date":u()(e.created_date).format("DD-MM-YYYY")}))),a={startY:{top:0,right:0,bottom:0,left:0},head:[["S.No","Name","Phone","Email","Country","State","City","Address","Created Date"]],body:[]},s=[];Object.keys(t[0]).forEach((e=>{const a=Math.max(...t.map((t=>t[e].toString().length)));s.push({columnWidth:a>25?25:a+12})})),t.forEach((e=>{a.body.push(Object.values(e))})),e.autoTable({...a,styles:{overflow:"linebreak"},columnStyles:s}),e.save("CustomerData.pdf")},children:"Download"}),(0,B.jsx)(o.Z,{onChange:e=>{const t=e.target.value;if(W(t),""===t)te();else{const e=m.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));H(e)}},placeholder:"Search by name",value:R,style:{width:"150px",marginLeft:"20px"}})]}),(0,B.jsx)(r.Z,{form:a,component:!1,children:(0,B.jsx)("div",{ref:q,children:(0,B.jsx)(n.Z,{components:{body:{}},bordered:!0,dataSource:m,columns:re,rowClassName:"editable-row",pagination:{onChange:ee},scroll:{x:2e3}})})}),(0,B.jsxs)(x.Z,{className:"modal d-flex align-items-center",show:e,onHide:()=>{t(!1)},children:[(0,B.jsx)(x.Z.Header,{className:"modalhead",closeButton:!0,children:(0,B.jsx)(x.Z.Title,{children:"Create Login"})}),(0,B.jsx)(x.Z.Body,{className:"modalbody",children:(0,B.jsx)("div",{children:(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(I.J9,{initialValues:{name:J,email:$,password:"",submit:null},validationSchema:k.Ry().shape({email:k.Z_().email("Must be a valid email").max(255).required("Email is required"),password:k.Z_().max(255).required("Password is required")}),onSubmit:async(e,a)=>{let{setErrors:s,setStatus:r,setSubmitting:i,resetForm:n}=a;Q(!0);try{const a=await(null===c.Z||void 0===c.Z?void 0:c.Z.RegisterCustomer(e));if(console.log("response------\x3e",a),a&&200===a.status){var l;n(),r({success:!0}),i(!1),Y.Am.success(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message),t(!1)}else{var d;const e=null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message;r({success:!1}),s({submit:e}),i(!1),Y.Am.error(e),t(!1)}}catch(o){console.error(o),r({success:!1}),s({submit:o}),i(!1),Y.Am.error(o)}Q(!1)},children:e=>{let{errors:t,handleBlur:a,handleChange:s,handleSubmit:r,isSubmitting:i,touched:n,values:l}=e;return(0,B.jsxs)("form",{noValidate:!0,onSubmit:r,children:[(0,B.jsx)(g.ZP,{container:!0,spacing:V?0:2,children:(0,B.jsx)(g.ZP,{item:!0,xs:12,sm:12,children:(0,B.jsx)(j.Z,{fullWidth:!0,disabled:!0,label:"Name",margin:"normal",name:"fname",type:"text",value:J,sx:{...T.typography.customInput}})})}),(0,B.jsxs)(b.Z,{fullWidth:!0,error:Boolean(n.email&&t.email),sx:{...T.typography.customInput},children:[(0,B.jsx)(w.Z,{htmlFor:"outlined-adornment-email-register",children:"Email Address / Username"}),(0,B.jsx)(Z.Z,{disabled:!0,id:"outlined-adornment-email-register",type:"email",value:l.email,name:"email",onBlur:a,onChange:s,inputProps:{}}),n.email&&t.email&&(0,B.jsx)(C.Z,{error:!0,id:"standard-weight-helper-text--register",children:t.email})]}),(0,B.jsxs)(b.Z,{fullWidth:!0,error:Boolean(n.password&&t.password),sx:{...T.typography.customInput},children:[(0,B.jsx)(w.Z,{htmlFor:"outlined-adornment-password-register",children:"Password"}),(0,B.jsx)(Z.Z,{id:"outlined-adornment-password-register",type:z?"text":"password",value:l.password,name:"password",label:"Password",onBlur:a,onChange:e=>{s(e)},endAdornment:(0,B.jsx)(S.Z,{position:"end",children:(0,B.jsx)(N.Z,{"aria-label":"toggle password visibility",onClick:ae,onMouseDown:se,edge:"end",size:"large",children:z?(0,B.jsx)(P.Z,{}):(0,B.jsx)(A.Z,{})})}),inputProps:{}})]}),(0,B.jsx)(E.Z,{sx:{mt:3,mb:3},children:(0,B.jsx)(D.Z,{children:(0,B.jsx)(v.Z,{className:"tech-btn",disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Create login"})})})]})}})})})})]}),(0,B.jsx)(Y.Ix,{})]})]})}}}]);