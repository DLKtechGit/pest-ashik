"use strict";(self.webpackChunkpest_admin=self.webpackChunkpest_admin||[]).push([[223],{81325:function(e,t,a){var i=a(66585);t.Z={createTechnician:e=>i.Z.Post("technician/createTechnician",e),technicianList:e=>i.Z.Get("technician/getTechnician",e),technicianTask:e=>i.Z.Get("task/getTasks",e),createTechnicianTask:e=>i.Z.Post("task/createTask",e),DeleteTechinician:e=>{let t=`technician/delete/${e}`;return i.Z.Post(t)},DeletedTechnician:e=>i.Z.Get("technician/all/deletedTechnician",e),RestoreTechnician:e=>{const t=`technician/delete/technician/${e}`;return i.Z.Post(t)},TechnicianCount:e=>i.Z.Get("company/totalTechnician",e),StartTaskCount:e=>i.Z.Get("task/start/taskcount",e),OngoingTaskCount:e=>i.Z.Get("task/ongoing/taskcount",e),CompletedTaskCount:e=>i.Z.Get("task/completed/taskcount",e),RegisterTechnicican:e=>i.Z.Post("otherauth/technicianRegister",e),EditTechnician:e=>{const t=`technician/editTechnician/${e.id}`;return i.Z.Post(t,e)},GetReports:e=>i.Z.Get("task/completedTaskDetails/",e),deleteTask:e=>i.Z.Post("task/delete/task",e)}},72605:function(e,t,a){var i=a(47313),n=a(70551),s=a(81730),r=a(46417);const l=(0,i.forwardRef)(((e,t)=>{var a,i;let l,d,{children:o,type:c,direction:h,offset:m,scale:u}=e;switch(h){case"up":case"left":l=m,d=0;break;default:l=0,d=m}const[p,x]=(0,n.n)(l,d),[f,g]=(0,n.n)(l,d);switch(c){case"rotate":return(0,r.jsx)(s.E.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:o});case"slide":return"up"===h||"down"===h?(0,r.jsx)(s.E.div,{ref:t,animate:{y:void 0!==f?f:""},onHoverEnd:()=>g(),onHoverStart:()=>g(),children:o}):(0,r.jsx)(s.E.div,{ref:t,animate:{x:void 0!==p?p:""},onHoverEnd:()=>x(),onHoverStart:()=>x(),children:o});default:return"number"===typeof u&&(u={hover:u,tap:u}),(0,r.jsx)(s.E.div,{ref:t,whileHover:{scale:null===(a=u)||void 0===a?void 0:a.hover},whileTap:{scale:null===(i=u)||void 0===i?void 0:i.tap},children:o})}}));l.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},t.Z=l},18179:function(e,t,a){a.r(t);var i=a(47313),n=a(57884),s=a(96892),r=a(71820),l=a(33497),d=a(31046),o=a(67118),c=a(81325),h=a(98718),m=a(70816),u=a.n(m),p=a(35508),x=(a(18695),a(29385)),f=a(19860),g=a(24813),v=a(61113),Z=a(69099),y=a(9019),j=a(32802),w=a(1550),b=a(23306),k=a(37843),N=a(15480),C=a(41727),S=a(47131),T=a(57829),P=a(3463),D=a(79429),E=a(72605),I=a(10237),L=a(22611),F=a(41948),R=a(65213),G=a(97890),_=a(46417);t.default=()=>{const[e,t]=(0,i.useState)(!1),[a]=n.Z.useForm(),[m,Y]=(0,i.useState)([]),[B,H]=(0,i.useState)(""),[K,A]=(0,i.useState)(""),M=(0,i.useRef)(null),W=(0,f.Z)(),q=(0,g.Z)(W.breakpoints.down("md")),[$,z]=(0,i.useState)(!1),[V,J]=(0,i.useState)(""),[O,U]=(0,i.useState)(""),[Q,X]=(0,i.useState)(!1),ee=(0,G.s0)();(0,i.useEffect)((()=>{"true"===localStorage.getItem("login")?ae():ee("/")}),[]);const te=()=>{H("")},ae=async()=>{X(!0);try{var e;const t=await c.Z.technicianList(),a=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.Results,i=a.filter((e=>!1===e.deleted)).sort(((e,t)=>new Date(t.created_date)-new Date(e.created_date)));Y(i)}catch(t){console.log(t)}finally{X(!1)}},ie=()=>{z(!$)},ne=e=>{e.preventDefault()},se=[{title:"S.No",dataIndex:"sNo",width:"3%",editable:!0,render:(e,t,a)=>a+1},{title:"FirstName",dataIndex:"firstName",width:"8%",editable:!0},{title:"LastName",dataIndex:"lastName",width:"8%",editable:!0},{title:"Phone",dataIndex:"phone",width:"10%",editable:!0,render:(e,t)=>`${t.phoneNumber}`},{title:"Email",dataIndex:"email",width:"10%",editable:!0},{title:"Created Date",dataIndex:"created_date",width:"8%",render:e=>u()(e).format("DD-MM-YYYY")},{title:"Action",width:"5%",dataIndex:"action",fixed:"right",render:(e,a)=>{const i=(e=>e.key===B)(a);return i?(0,_.jsxs)("span",{children:[(0,_.jsx)(v.Z.Link,{onClick:()=>re(a.key),style:{marginRight:8},children:"Save"}),(0,_.jsx)(s.Z,{title:"Sure to cancel?",onConfirm:te,children:(0,_.jsx)("a",{children:"Cancel"})})]}):(0,_.jsx)("div",{className:"d-flex gap-3 justify-content-center",children:(0,_.jsx)("span",{children:(0,_.jsx)(Z.Z,{type:"primary",onClick:()=>(async(e,a,i,n)=>{J(i+n),U(a),t(!0)})(a._id,a.email,a.firstName,a.lastName),className:"tech-btn",children:"Create Login"})})})}}],re=async e=>{try{const t=await a.validateFields(),i=[...m],n=i.findIndex((t=>e===t.key));if(n>-1){const e=i[n];i.splice(n,1,{...e,...t}),Y(i),H("")}else i.push(t),Y(i),H("")}catch(t){console.log("Validate Failed:",t)}};return(0,_.jsxs)(_.Fragment,{children:[Q&&(0,_.jsx)(R.Z,{show:Q}),(0,_.jsxs)(l.Z,{title:"Technician List",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-end ",style:{position:"relative",bottom:"10px"},children:[(0,_.jsx)(d.Z,{onClick:()=>{const e=new p.default("p","mm","a4"),t=m.map(((e,t)=>({"S.No":t+1,FirstName:e.firstName,LastName:e.lastName,Phone:e.phoneNumber,Email:e.email,"Created Date":u()(e.created_date).format("DD-MM-YYYY")}))),a=[{header:"S.No",dataKey:"S.No"},{header:"FirstName",dataKey:"FirstName"},{header:"LastName",dataKey:"LastName"},{header:"Phone",dataKey:"Phone"},{header:"Email",dataKey:"Email"},{header:"Created Date",dataKey:"Created Date"}];e.autoTable({head:[a.map((e=>e.header))],body:t.map((e=>a.map((t=>e[t.dataKey])))),theme:"striped",margin:{top:10},styles:{cellPadding:2,fontSize:10},columnStyles:{0:{cellWidth:10},1:{cellWidth:30}}}),e.save("TechnicianData.pdf")},children:"Download"}),(0,_.jsx)(o.Z,{onChange:e=>{const t=e.target.value;if(A(t),""===t)ae();else{const e=m.filter((e=>e.firstName.toLowerCase().includes(t.toLowerCase())));Y(e)}},placeholder:"Search by name",value:K,style:{width:"150px",marginLeft:"20px"}})]}),(0,_.jsx)(n.Z,{form:a,component:!1,children:(0,_.jsx)("div",{ref:M,children:(0,_.jsx)(r.Z,{components:{body:{}},bordered:!0,dataSource:m,columns:se,rowClassName:"editable-row",pagination:{onChange:te},scroll:{x:1500}})})}),(0,_.jsxs)(x.Z,{className:"modal d-flex align-items-center",show:e,onHide:()=>{t(!1)},children:[(0,_.jsx)(x.Z.Header,{className:"modalhead",closeButton:!0,children:(0,_.jsx)(x.Z.Title,{children:"Create Login"})}),(0,_.jsx)(x.Z.Body,{className:"modalbody",children:(0,_.jsx)("div",{children:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(D.J9,{initialValues:{name:V,email:O,password:"",submit:null},validationSchema:P.Ry().shape({email:P.Z_().email("Must be a valid email").max(255).required("Email is required"),password:P.Z_().max(255).required("Password is required")}),onSubmit:async(e,a)=>{let{setErrors:i,setStatus:n,setSubmitting:s,resetForm:r}=a;X(!0);try{const a=await h.Z.RegisterCustomer(e);if(a&&200===a.status){var l;r(),n({success:!0}),s(!1),F.Am.success(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message),t(!1)}else{var d;const e=null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message;n({success:!1}),i({submit:e}),s(!1),F.Am.error(e)}}catch(o){console.error(o),n({success:!1}),i({submit:o}),s(!1),F.Am.error(o)}finally{X(!1)}},children:e=>{let{errors:t,handleBlur:a,handleChange:i,handleSubmit:n,isSubmitting:s,touched:r,values:l}=e;return(0,_.jsxs)("form",{noValidate:!0,onSubmit:n,children:[(0,_.jsx)(y.ZP,{container:!0,spacing:q?0:2,children:(0,_.jsx)(y.ZP,{item:!0,xs:12,sm:12,children:(0,_.jsx)(j.Z,{fullWidth:!0,disabled:!0,label:"Name",margin:"normal",name:"fname",type:"text",value:V,sx:{...W.typography.customInput}})})}),(0,_.jsxs)(w.Z,{fullWidth:!0,error:Boolean(r.email&&t.email),sx:{...W.typography.customInput},children:[(0,_.jsx)(b.Z,{htmlFor:"outlined-adornment-email-register",children:"Email Address / Username"}),(0,_.jsx)(k.Z,{disabled:!0,id:"outlined-adornment-email-register",type:"email",value:l.email,name:"email",onBlur:a,onChange:i,inputProps:{}}),r.email&&t.email&&(0,_.jsx)(N.Z,{error:!0,id:"standard-weight-helper-text--register",children:t.email})]}),(0,_.jsxs)(w.Z,{fullWidth:!0,error:Boolean(r.password&&t.password),sx:{...W.typography.customInput},children:[(0,_.jsx)(b.Z,{htmlFor:"outlined-adornment-password-register",children:"Password"}),(0,_.jsx)(k.Z,{id:"outlined-adornment-password-register",type:$?"text":"password",value:l.password,name:"password",label:"Password",onBlur:a,onChange:e=>{i(e)},endAdornment:(0,_.jsx)(C.Z,{position:"end",children:(0,_.jsx)(S.Z,{"aria-label":"toggle password visibility",onClick:ie,onMouseDown:ne,edge:"end",size:"large",children:$?(0,_.jsx)(I.Z,{}):(0,_.jsx)(L.Z,{})})}),inputProps:{}})]}),(0,_.jsx)(T.Z,{sx:{mt:3,mb:3},children:(0,_.jsx)(E.Z,{children:(0,_.jsx)(Z.Z,{className:"tech-btn",disableElevation:!0,disabled:s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Create login"})})})]})}})})})})]}),(0,_.jsx)(F.Ix,{})]})]})}}}]);